# [Printing (korint)](http://www.korint.uu.se/?languageId=1)

# Table of Contents
1. [Pre-installation info](#pre-installation)
2. [Remarks](#remarks)
3. [Installation](#installation)
4. [Verify](#verify)

## Pre installation info <a name="pre-installation"></a>
The [university has checked](http://www.korint.uu.se/korintClients/linux/) some distributions for the state of this script, the results follow

1. Tested/working OSes:
    * openSUSE tumbleweed (my contribution)
    * Fedora 13 32-bit
    * Ubuntu 8, 9, 10, 11, 12, 13, 14, 15 

2. Tested/**NOT** working OSes:
    * CentOS 5.4

## Remarks <a name="remarks"></a>
Installing this printer [wont make all of the programs work by default](http://www.korint.uu.se/korintClients/linuxnotes/).
**Only the programs that ask for a username and a password will work.**
Evince is one of these programs, I would recommend using this to test if the printer was successfully installed.
You have to supply your UU username with "Password A".
A program that **doesn't ask** for credentials is `okular`, so it wouldn't work right now.

There is a way to bypass this but it wouldn't be considered as a very secure way.
After installing the printer you need to go and change the address of the printer in such way that it would contain your username and password.

The file needed editing is */etc/cups/printers.conf*.

First things first.
Cups need to be stopped in order to change that file.
In my case this is done by `rccups stop` (this may differ in your distribution).
Then it is time to change the file which looks something like (root access is needed):
```
# Printer configuration file for CUPS v2.1.3
# Written by cupsd on 2016-10-01 19:44
# DO NOT EDIT THIS FILE WHEN CUPSD IS RUNNING
<Printer Korint-FollowPrint>
UUID urn:uuid:71a16e6f-f7f6-35e3-41bd-3f0aa7b64c3b
AuthInfoRequired username,password
Info Korint-FollowPrint
Location Uppsala University FollowPrint
MakeModel Ricoh Aficio MP C3300 PS
DeviceURI ipp://ipp.korint.uu.se/printers/Korint-FollowPrint?compression=none
State Idle
StateTime 1475343870
ConfigTime 1475340331
Type 8433916
Accepting Yes
Shared Yes
JobSheets none none
QuotaPeriod 0
PageLimit 0
KLimit 0
OpPolicy default
ErrorPolicy stop-printer
</Printer>
```
The line containing the `DeviceURI ipp://ipp.korint.uu.se/printers/Korint-FollowPrint?compression=none` should be set to `DeviceURI ipp://abcd1234:passwordA@ipp.korint.uu.se/printers/Korint-FollowPrint?compression=none` and the starting again cups daemon by `rccups start`.
Now even programs like `okular` will be able to print.

## Installation <a name="installation"></a>
To install the university's printing system on a Linux computer run `sudo ./AddPrinter.sh` which will install a local printer.

## Verify <a name="verify"></a>
Open something in evince, try to print.
The first time you are going to print might not work, so try again to print.
Now you should be asked to enter a username and password, enter abcd1234 and passwordA.
To finally check if everything works fine go to [cirrato's web page](https://korint.uu.se/cirrato/LoginPage.aspx?mode=selfservice) and you should be able to see the file that you just printed in the queue. If you submitted a bigger file or you're not on a good internet connection might take a bit more time to appear there. Now everything should work fine.
